<div class="formDetailsTitle">Contrats</div>

<div class="container">
    <div class="row justify-content-between">
        <div class="col-2">
            <button
                class="btnAddTenant"
                (click)='btnClickActivateForm()'
                mat-flat-button="mat-flat-button"
                color="accent">
                <i class="bi bi-plus-square-fill"></i>
                Ajouter un contrat
            </button>
        </div>
    </div>
    <br>

    <!-- Contract form component -->

        <div class="mainTenantForms" *ngIf="activateEditForm">
            <div class="btnClose row justify-content-end">
                <button type="button" class="btn-close" aria-label="Close" (click)="btnClose()"></button>

            </div>
            <form [formGroup]="newContractForm" (submit)="contractFormSubmit()">
                <div class="row">
                    <div class="col-6">
                        <div class="form-group row form-row" *ngIf="false">
                            <label class="col-sm-4 col-form-label">Id</label>
                            <div class="col-sm-8">
                                <input formControlName="id" type="text" class="form-control"/>
                            </div>
                        </div>
                        <div class="form-group row form-row">
                            <label class="col-sm-4 col-form-label formMandatoryLabel">* Date de début</label>
                            <div class="col-sm-8">
                                <input formControlName="startDate" type="date" class="form-control"/>
                                <span
                                    class="formSpan"
                                    *ngIf="!form['startDate'].value">
                                    {{isMandatory}}
                                </span>
                            </div>
                        </div>
                        <div class="form-group row form-row">
                            <label class="col-sm-4 col-form-label">Date de fin</label>
                            <div class="col-sm-8">
                                <input formControlName="endDate" type="date" class="form-control"/>
                            </div>
                        </div>

                        <div class="form-group row form-row">
                            <label class="col-sm-4 col-form-label formMandatoryLabel">* Type de contrat</label>
                            <div class="col-sm-8">
                                <select class="form-control" formControlName="contractType">
                                    <option *ngFor="let contractType of contractTypes" [ngValue]="contractType.id">{{contractType.name}}</option>
                                </select>
                                
                                    <span class="formSpan" *ngIf="!form['contractType'].value">
                                      {{isMandatory}}
                                  </span>
                            </div>
                        </div>

                    </div>
                </div>
                <br>
                    <div class="row justify-content-center">
                        <button [disabled]=!formStatusValue
                            type="submit"
                            class="btn btn-dark col-sm-2 form-validate-button form-button">Valider</button>
                    </div>
                </form>
            </div>


            <br>
           
                <div class="row justify-content-end">
                        <mat-form-field appearance="legacy" class="col-3">
                            <mat-label style="color: gray;">Filtrer</mat-label>
                            <input class="form-control"
                                matInput
                                (keyup)="applyFilter($event)"
                                placeholder="Ex. Logement"
                                #input 
                                />
                        </mat-form-field>
                   
                </div>

      <div class="mat-elevation-z8">
        <table mat-table [dataSource]="dataSource" matSort>
      
          <!-- ID Column -->
          <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> ID </th>
            <td mat-cell *matCellDef="let dataSource"> {{dataSource.id}} </td>
          </ng-container>
      
          <!-- Start Date Column -->
          <ng-container matColumnDef="startDate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Date de début </th>
            <td mat-cell *matCellDef="let dataSource"> {{dataSource.startDate| date:'longDate'}} </td>
          </ng-container>
      
          <!-- End Date Column -->
          <ng-container matColumnDef="endDate">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Date de fin </th>
            <td mat-cell *matCellDef="let dataSource"> {{dataSource.endDate| date:'longDate'}} </td>
          </ng-container>
      
          <!-- Contract Type Column -->
          <ng-container matColumnDef="contractType">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Type de contrat </th>
            <td mat-cell *matCellDef="let dataSource"> {{dataSource.contractType}} </td>
          </ng-container>
      
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      
          <!-- Row shown when there is no matching data. -->
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" colspan="4">Aucune donnée trouvée pour "{{input.value}}"</td>
          </tr>
        </table>
        <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Selectionner les pages de contracts"></mat-paginator>
      </div>
      